@use '../../../styles/mixins' as *;
@use '../../../styles/breakpoints' as *;

// ============================================================================
// STATS SIDEBAR - MOBILE FIRST RESPONSIVE
// ============================================================================

.stats-sidebar {
  @include flex-column;

  // Telas muito pequenas: layout vertical (melhor UX)
  @media (max-width: 549px) {
    flex-direction: column;
    gap: var(--spacing-md);
    overflow: visible;
    padding: var(--spacing-md) 0;
  }

  // Telas médias (550px+): horizontal scroll layout
  @media (min-width: 550px) {
    flex-direction: row;
    gap: var(--spacing-md);
    overflow-x: auto;
    overflow-y: hidden;
    padding: var(--spacing-md) 0;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }

  @include tablet-up {
    // Tablet: ainda horizontal mas com mais espaço
    gap: var(--spacing-lg);
    padding: var(--spacing-lg) 0;
  }

  @include desktop-up {
    // Desktop: layout vertical como sidebar
    flex-direction: column;
    position: sticky;
    top: calc(var(--spacing-xl) + 80px);
    max-height: calc(100vh - 160px);
    overflow-x: hidden;
    overflow-y: auto;
    padding: 0;
  }
}

.sidebar-title {
  font-weight: var(--font-weight-semibold);
  color: var(--text-primary);
  margin: 0;
  text-align: center;

  // Telas muito pequenas: mostrar título
  @media (max-width: 549px) {
    display: block;
    font-size: var(--font-size-base);
    margin-bottom: var(--spacing-sm);
  }

  // Telas médias: ocultar título para economizar espaço horizontal
  @media (min-width: 550px) and (max-width: 767px) {
    display: none;
  }

  @include tablet-up {
    display: block;
    font-size: var(--font-size-base);
    padding: 0 var(--spacing-sm);
  }

  @include desktop-up {
    font-size: var(--font-size-lg);
    text-align: left;
  }
}

.stats-list {
  @include flex-center;

  // Telas muito pequenas: layout vertical
  @media (max-width: 549px) {
    flex-direction: column;
    gap: var(--spacing-md);
    width: 100%;
  }

  // Telas médias: layout horizontal
  @media (min-width: 550px) {
    flex-direction: row;
    gap: var(--spacing-md);
    min-width: min-content;
  }

  @include tablet-up {
    gap: var(--spacing-lg);
  }

  @include desktop-up {
    // Desktop: layout vertical
    @include flex-column;
    gap: var(--spacing-md);
  }
}

// ============================================================================
// STAT CARDS RESPONSIVE
// ============================================================================

.stat-card {
  transition: all var(--transition-normal);
  flex-shrink: 0;
  scroll-snap-align: center;

  // Telas muito pequenas: cards ocupam largura total
  @media (max-width: 549px) {
    width: 100%;
    min-width: auto;
  }

  // Telas médias: cartões menores com largura fixa
  @media (min-width: 550px) {
    min-width: 120px;
  }

  @include tablet-up {
    min-width: 140px;
  }

  @include desktop-up {
    width: 100%;
    min-width: auto;

    &:hover {
      transform: translateX(-4px);
    }
  }

  .stat {
    @include flex-column;
    align-items: center;
    text-align: center;

    // Mobile: padding compacto
    gap: var(--spacing-xs);
    padding: var(--spacing-md);

    @include tablet-up {
      gap: var(--spacing-sm);
      padding: var(--spacing-lg);
    }
  }

  .stat-value {
    font-weight: var(--font-weight-bold);
    background: var(--gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1;

    // Mobile: tamanho menor
    font-size: var(--font-size-xl);

    @include tablet-up {
      font-size: var(--font-size-2xl);
    }

    @include desktop-up {
      font-size: var(--font-size-3xl);
    }
  }

  .stat-label {
    color: var(--text-secondary);
    font-weight: var(--font-weight-medium);
    text-align: center;
    line-height: 1.3;

    // Mobile: tamanho menor
    font-size: var(--font-size-xs);

    @include tablet-up {
      font-size: var(--font-size-sm);
    }
  }
}

// ============================================================================
// SCROLL CUSTOMIZADO
// ============================================================================

.stats-sidebar {
  // Scroll horizontal apenas para telas médias (550px+)
  @media (min-width: 550px) {
    scrollbar-width: thin;
    scrollbar-color: var(--border-color) transparent;

    &::-webkit-scrollbar {
      height: 4px;
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background-color: var(--border-color);
      border-radius: var(--radius-full);

      &:hover {
        background-color: var(--text-secondary);
      }
    }
  }

  @include desktop-up {
    &::-webkit-scrollbar {
      width: 6px;
      height: auto;
    }
  }
}

// ============================================================================
// SCROLL INDICATOR MOBILE
// ============================================================================

// Indicador de scroll apenas para telas médias onde há scroll horizontal
@media (min-width: 550px) and (max-width: 767px) {
  .stats-sidebar::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 3px;
    background: var(--border-color);
    border-radius: var(--radius-full);
    opacity: 0.5;
  }
}

// ============================================================================
// OTIMIZAÇÕES PARA TELAS MUITO PEQUENAS
// ============================================================================

// Ajustes para dispositivos extremamente pequenos (320px e menos)
@media (max-width: 320px) {
  .stat-card {
    .stat {
      padding: var(--spacing-sm);

      .stat-value {
        font-size: var(--font-size-lg);
      }

      .stat-label {
        font-size: calc(var(--font-size-xs) - 1px);
      }
    }
  }
}

// ============================================================================
// ACESSIBILIDADE
// ============================================================================

@media (prefers-reduced-motion: reduce) {
  .stat-card {
    transition: none;

    &:hover {
      transform: none;
    }
  }

  .stats-sidebar {
    scroll-behavior: auto;
  }
}

// Focus visible para navegação por teclado
.stat-card:focus-within {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
  border-radius: var(--radius-md);
}
