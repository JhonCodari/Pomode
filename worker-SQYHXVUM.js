var s=0,a=null;self.onmessage=t=>{let{action:e,endTime:c}=t.data;switch(e){case"start":s=c,o();break;case"stop":n();break;case"check":i();break}};function o(){n(),a=setInterval(()=>{let t=Date.now(),e=Math.max(0,Math.ceil((s-t)/1e3));self.postMessage({type:"tick",remaining:e,now:t}),e<=0&&(self.postMessage({type:"complete"}),n())},100)}function n(){a&&(clearInterval(a),a=null)}function i(){if(s===0)return;let t=Date.now(),e=Math.max(0,Math.ceil((s-t)/1e3));self.postMessage({type:"status",remaining:e,completed:e<=0})}
